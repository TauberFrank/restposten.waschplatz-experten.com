<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Produkt | Restposten Waschplatz-Experten</title>
    <meta name="description" id="page-desc" content="Premium-Badmöbel zum Sonderpreis — Showroom-Räumung in Ludwigsburg.">
    <meta property="og:type" content="product">
    <meta property="og:url" id="og-url" content="https://restposten.waschplatz-experten.com/produkt.html">
    <meta property="og:title" id="og-title" content="Restposten Waschplatz-Experten">
    <meta property="og:description" id="og-desc" content="Premium-Badmöbel zum Sonderpreis">
    <meta property="og:image" id="og-image" content="">
    <link rel="canonical" href="https://restposten.waschplatz-experten.com">
    <link rel="stylesheet" href="./dist/output.css">
</head>
<body class="bg-gray-950 text-white">

    <!-- HEADER -->
    <header class="sticky top-0 z-50 bg-gray-950/95 backdrop-blur border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
            <a href="./index.html" class="text-lg font-bold tracking-tight hover:text-gray-300 transition-colors">Waschplatz-Experten</a>
            <div class="flex items-center gap-2 sm:gap-4">
                <span class="text-[10px] sm:text-xs font-semibold bg-amber-500/15 text-amber-400 px-2 sm:px-3 py-1 rounded-full border border-amber-500/30">Nur Abholung</span>
                <span class="text-[10px] sm:text-xs font-semibold bg-red-500/15 text-red-400 px-2 sm:px-3 py-1 rounded-full border border-red-500/30">Einzelstücke</span>
                <a href="tel:071411421690" class="bg-red-600 hover:bg-red-700 text-white text-sm font-bold px-4 py-2 rounded-lg transition-colors">07141 1421690</a>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="max-w-7xl mx-auto px-4 py-6">

        <!-- BREADCRUMB -->
        <a href="./index.html" class="text-red-400 hover:text-red-300 text-sm mb-6 inline-block">&larr; Zurück zur Übersicht</a>

        <!-- MOBILE SIDEBAR (horizontal scroll) -->
        <div class="lg:hidden mb-6 -mx-4 px-4">
            <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-3">Alle Modelle</h3>
            <div id="sidebar-mobile" class="flex gap-3 overflow-x-auto pb-3 scrollbar-thin"></div>
        </div>

        <div class="flex gap-8">

            <!-- LEFT: Product Detail -->
            <div class="flex-1 min-w-0">

                <!-- IMAGE GALLERY -->
                <div class="mb-8">
                    <div class="relative cursor-pointer mb-3" id="main-image-wrap">
                        <img id="main-image" src="" alt="" class="w-full max-h-[500px] object-contain rounded-xl bg-gray-900">
                        <span id="discount-badge" class="absolute top-4 right-4 bg-red-600 text-white text-lg font-black px-4 py-2 rounded-xl shadow-lg"></span>
                    </div>
                    <div id="thumbnails" class="grid grid-cols-5 sm:grid-cols-8 gap-2"></div>
                </div>

                <!-- TITLE + PRICE -->
                <div class="mb-8">
                    <h1 id="product-title" class="text-2xl sm:text-3xl font-black mb-2"></h1>
                    <p id="product-subtitle" class="text-gray-400 mb-4"></p>
                    <div class="flex flex-wrap items-baseline gap-4 mb-2">
                        <span id="product-price" class="text-3xl sm:text-4xl font-black text-red-500"></span>
                        <span id="product-original" class="text-lg text-gray-500 line-through"></span>
                    </div>
                    <p id="product-savings" class="text-emerald-400 font-bold"></p>
                </div>

                <!-- CONDITION NOTE -->
                <div id="condition-block" class="hidden mb-8 bg-amber-500/10 border border-amber-500/30 rounded-xl p-4">
                    <p class="text-amber-300 text-sm font-semibold mb-1">Hinweis zum Zustand</p>
                    <p id="condition-text" class="text-amber-200/80 text-sm"></p>
                </div>

                <!-- DESCRIPTION -->
                <div class="mb-8">
                    <h2 class="text-lg font-bold mb-3">Beschreibung</h2>
                    <div id="product-description" class="text-gray-300 leading-relaxed space-y-3"></div>
                </div>

                <!-- SPECS TABLE -->
                <div class="mb-8">
                    <h2 class="text-lg font-bold mb-3">Technische Details</h2>
                    <div id="specs-table" class="bg-gray-900/50 rounded-xl overflow-hidden"></div>
                </div>

                <!-- PICKUP INFO BLOCK -->
                <div class="mb-8 border-l-4 border-amber-500 bg-gray-900/50 rounded-r-xl p-5">
                    <h3 class="font-bold text-amber-400 mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        Abholung &amp; Wichtige Hinweise
                    </h3>
                    <p class="text-gray-300 text-sm mb-3">Mitnahmepreis bei Selbstabholung gegen Barzahlung in Ludwigsburg.</p>
                    <ul class="text-gray-400 text-sm space-y-2 mb-4">
                        <li class="flex gap-2"><span class="text-amber-500 mt-0.5">&#8226;</span><span>Unmontiert zum Einladen bereit (1. Stock, gut zugänglich, Einlademöglichkeit direkt vor dem Gebäude)</span></li>
                        <li class="flex gap-2"><span class="text-amber-500 mt-0.5">&#8226;</span><span>Bitte vereinbaren Sie einen Termin und kommen Sie min. zu zweit</span></li>
                        <li class="flex gap-2"><span class="text-amber-500 mt-0.5">&#8226;</span><span>Befestigungsmaterial enthalten — Montage denkbar einfach</span></li>
                        <li class="flex gap-2"><span class="text-amber-500 mt-0.5">&#8226;</span><span>Armaturen nicht enthalten, ggf. zusätzlich erhältlich</span></li>
                        <li class="flex gap-2"><span class="text-amber-500 mt-0.5">&#8226;</span><span>Zwischenverkauf vorbehalten — bitte vorher anrufen oder mailen</span></li>
                    </ul>
                    <div class="text-sm text-gray-400 space-y-1 border-t border-gray-800 pt-3">
                        <p>Kammererstraße 8, 71636 Ludwigsburg</p>
                        <p>Telefon: <a href="tel:071411421690" class="text-white hover:text-red-400">07141 1421690</a> · E-Mail: <a href="mailto:service@waschplatz-experten.com" class="text-white hover:text-red-400">service@waschplatz-experten.com</a></p>
                        <p>Täglich 8–20 Uhr, auch am Wochenende</p>
                    </div>
                </div>

                <!-- CTA BUTTONS -->
                <div class="flex flex-col sm:flex-row gap-3 mb-8">
                    <a href="tel:071411421690" class="flex-1 bg-red-600 hover:bg-red-700 text-white text-center font-bold py-4 rounded-xl transition-colors text-lg">Jetzt anrufen</a>
                    <a id="whatsapp-link" href="#" target="_blank" rel="noopener" class="flex-1 bg-emerald-600 hover:bg-emerald-700 text-white text-center font-bold py-4 rounded-xl transition-colors text-lg">WhatsApp schreiben</a>
                </div>

            </div>

            <!-- RIGHT: SIDEBAR (Desktop) -->
            <aside class="hidden lg:block w-72 shrink-0">
                <div class="sticky top-20">
                    <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-4">Alle Modelle</h3>
                    <div id="sidebar-desktop" class="space-y-3 max-h-[calc(100vh-120px)] overflow-y-auto pr-2"></div>
                </div>
            </aside>

        </div>
    </main>

    <!-- FOOTER -->
    <footer class="border-t border-gray-800 bg-gray-950 py-8 px-4 mt-12">
        <div class="max-w-5xl mx-auto flex flex-col sm:flex-row justify-between items-center gap-4 text-sm text-gray-500">
            <span>&copy; 2026 Waschplatz-Experten — restposten.waschplatz-experten.com</span>
            <div class="flex gap-6">
                <a href="./impressum.html" class="hover:text-gray-300 transition-colors">Impressum</a>
                <a href="./datenschutz.html" class="hover:text-gray-300 transition-colors">Datenschutz</a>
                <a href="https://www.waschplatz-experten.com" class="hover:text-gray-300 transition-colors">Hauptwebsite</a>
            </div>
        </div>
    </footer>

    <!-- FLOATING CTA (Mobile) -->
    <div class="fixed bottom-0 left-0 right-0 bg-gray-950/95 backdrop-blur border-t border-gray-800 p-3 sm:hidden z-50">
        <a href="tel:071411421690" class="block bg-red-600 text-white text-center font-bold py-3 rounded-xl">Jetzt anrufen: 07141 1421690</a>
    </div>

    <!-- LIGHTBOX -->
    <div id="lightbox" class="fixed inset-0 bg-black/95 z-100 hidden items-center justify-center p-4">
        <button id="lightbox-close" class="absolute top-4 right-4 text-white text-3xl font-bold hover:text-red-400 transition-colors z-10">&times;</button>
        <button id="lightbox-prev" class="absolute left-4 top-1/2 -translate-y-1/2 text-white text-4xl font-bold hover:text-red-400 transition-colors z-10">&lsaquo;</button>
        <button id="lightbox-next" class="absolute right-4 top-1/2 -translate-y-1/2 text-white text-4xl font-bold hover:text-red-400 transition-colors z-10">&rsaquo;</button>
        <img id="lightbox-img" src="" alt="" class="max-h-[90vh] max-w-[90vw] object-contain rounded-lg">
    </div>

    <!-- PRODUCT DATA -->
    <script src="./products-data.js"></script>

    <script>
    // Get product ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');

    if (!productId || !PRODUCTS[productId]) {
        window.location.href = './index.html';
    }

    const product = PRODUCTS[productId];

    // Set page title & meta
    document.getElementById('page-title').textContent = `${product.title} ${product.width} | Restposten Waschplatz-Experten`;
    document.getElementById('page-desc').content = product.description.substring(0, 160);
    document.getElementById('og-title').content = `${product.title} ${product.width} — ${product.discount}% reduziert`;
    document.getElementById('og-desc').content = `Statt ${product.originalPrice.toLocaleString('de-DE')}€ nur ${product.price.toLocaleString('de-DE')}€. Selbstabholung Ludwigsburg.`;
    document.getElementById('og-image').content = `https://restposten.waschplatz-experten.com/${product.images[0]}`;
    document.getElementById('og-url').content = `https://restposten.waschplatz-experten.com/produkt.html?id=${productId}`;

    // Main image
    const mainImg = document.getElementById('main-image');
    mainImg.src = product.images[0];
    mainImg.alt = product.title;

    // Discount badge
    document.getElementById('discount-badge').textContent = `-${product.discount}%`;

    // Thumbnails
    const thumbContainer = document.getElementById('thumbnails');
    product.images.forEach((src, i) => {
        const thumb = document.createElement('img');
        thumb.src = src;
        thumb.alt = `${product.title} Bild ${i + 1}`;
        thumb.className = `w-full h-16 sm:h-20 object-cover rounded-lg cursor-pointer border-2 transition-colors ${i === 0 ? 'border-red-500' : 'border-transparent hover:border-gray-600'}`;
        thumb.addEventListener('click', () => {
            mainImg.src = src;
            thumbContainer.querySelectorAll('img').forEach(t => t.className = t.className.replace('border-red-500', 'border-transparent'));
            thumb.className = thumb.className.replace('border-transparent', 'border-red-500');
        });
        thumbContainer.appendChild(thumb);
    });

    // Title, subtitle, price
    document.getElementById('product-title').textContent = `${product.title} — ${product.width}`;
    document.getElementById('product-subtitle').textContent = product.subtitle;
    document.getElementById('product-price').textContent = `${product.price.toLocaleString('de-DE', {minimumFractionDigits: 0, maximumFractionDigits: 2})} €`;
    document.getElementById('product-original').textContent = `${product.originalPrice.toLocaleString('de-DE', {minimumFractionDigits: 2})} €`;
    document.getElementById('product-savings').textContent = `Sie sparen ${product.savings.toLocaleString('de-DE')} € (${product.discount}%)`;

    // Condition
    if (product.condition) {
        document.getElementById('condition-block').classList.remove('hidden');
        document.getElementById('condition-text').textContent = product.condition;
    }

    // Description
    const descContainer = document.getElementById('product-description');
    product.description.split('\n\n').forEach(para => {
        const p = document.createElement('p');
        p.textContent = para.trim();
        descContainer.appendChild(p);
    });

    // Specs table
    const specsTable = document.getElementById('specs-table');
    product.specs.forEach(([label, value], i) => {
        const row = document.createElement('div');
        row.className = `flex justify-between gap-4 px-4 py-3 text-sm ${i % 2 === 0 ? 'bg-gray-900/30' : ''}`;
        row.innerHTML = `<span class="text-gray-400 shrink-0">${label}</span><span class="text-white text-right">${value}</span>`;
        specsTable.appendChild(row);
    });

    // WhatsApp link
    document.getElementById('whatsapp-link').href = `https://wa.me/491733435961?text=${product.whatsapp}`;

    // Sidebar (both mobile and desktop)
    function buildSidebar(container, isMobile) {
        PRODUCT_ORDER.forEach(id => {
            const p = PRODUCTS[id];
            const isActive = id === productId;
            const card = document.createElement('a');
            card.href = `produkt.html?id=${id}`;

            if (isMobile) {
                card.className = `shrink-0 w-32 block rounded-lg overflow-hidden border-2 transition-colors ${isActive ? 'border-red-500' : 'border-gray-800 hover:border-gray-600'}`;
                card.innerHTML = `
                    <img src="${p.images[0]}" alt="${p.title}" class="w-full h-20 object-cover">
                    <div class="p-2">
                        <span class="text-[10px] font-bold text-red-400">-${p.discount}%</span>
                        <p class="text-[11px] text-white font-semibold leading-tight truncate">${p.title}</p>
                        <p class="text-[11px] text-red-400 font-bold">${p.price.toLocaleString('de-DE')} €</p>
                    </div>`;
            } else {
                card.className = `flex gap-3 p-2 rounded-lg transition-colors ${isActive ? 'bg-gray-800 border border-red-500/50' : 'hover:bg-gray-900 border border-transparent'}`;
                card.innerHTML = `
                    <img src="${p.images[0]}" alt="${p.title}" class="w-16 h-16 object-cover rounded-lg shrink-0">
                    <div class="min-w-0">
                        <span class="text-[10px] font-bold text-red-400">-${p.discount}%</span>
                        <p class="text-xs text-white font-semibold leading-tight truncate">${p.title}</p>
                        <p class="text-xs text-gray-400">${p.width}</p>
                        <p class="text-sm text-red-400 font-bold">${p.price.toLocaleString('de-DE')} €</p>
                    </div>`;
            }
            container.appendChild(card);
        });
    }

    buildSidebar(document.getElementById('sidebar-mobile'), true);
    buildSidebar(document.getElementById('sidebar-desktop'), false);

    // Lightbox
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    let currentIndex = 0;

    document.getElementById('main-image-wrap').addEventListener('click', () => {
        currentIndex = product.images.indexOf(mainImg.src) || 0;
        // Fix relative vs absolute URL matching
        const mainSrc = mainImg.src;
        currentIndex = product.images.findIndex(src => mainSrc.endsWith(src.replace('./', '')));
        if (currentIndex < 0) currentIndex = 0;
        lightboxImg.src = product.images[currentIndex];
        lightbox.classList.remove('hidden');
        lightbox.classList.add('flex');
        document.body.style.overflow = 'hidden';
    });

    function closeLightbox() {
        lightbox.classList.add('hidden');
        lightbox.classList.remove('flex');
        document.body.style.overflow = '';
    }

    document.getElementById('lightbox-close').addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', e => { if (e.target === lightbox) closeLightbox(); });

    document.getElementById('lightbox-prev').addEventListener('click', e => {
        e.stopPropagation();
        currentIndex = (currentIndex - 1 + product.images.length) % product.images.length;
        lightboxImg.src = product.images[currentIndex];
    });

    document.getElementById('lightbox-next').addEventListener('click', e => {
        e.stopPropagation();
        currentIndex = (currentIndex + 1) % product.images.length;
        lightboxImg.src = product.images[currentIndex];
    });

    document.addEventListener('keydown', e => {
        if (lightbox.classList.contains('hidden')) return;
        if (e.key === 'Escape') closeLightbox();
        if (e.key === 'ArrowLeft') { currentIndex = (currentIndex - 1 + product.images.length) % product.images.length; lightboxImg.src = product.images[currentIndex]; }
        if (e.key === 'ArrowRight') { currentIndex = (currentIndex + 1) % product.images.length; lightboxImg.src = product.images[currentIndex]; }
    });
    </script>

</body>
</html>
